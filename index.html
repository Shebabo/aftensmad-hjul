<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aftensmadshjulet Premium</title>
<script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js"></script>
<script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://cdn.jsdelivr.net/npm/babel-standalone@6/babel.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet">
<style>
body { 
  margin:0; font-family:system-ui,-apple-system; 
  background: linear-gradient(135deg,#fff7f0,#fcd5b5,#fff1e6); 
  display:flex; justify-content:center; align-items:center; min-height:100vh;
}
canvas { border-radius:50%; box-shadow:0 20px 50px rgba(0,0,0,0.3); }
.arrow { position:absolute; top:-18px; left:50%; transform:translateX(-50%); font-size:36px; text-shadow:0 2px 5px rgba(0,0,0,0.3);}
.card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
.card:hover { transform: translateY(-5px); box-shadow:0 25px 40px rgba(0,0,0,0.25);}
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">

// ===== DATA =====
const recipes=[
{name:"Lasagne",ingredients:[{name:"Oksek√∏d",amount:400,unit:"g"},{name:"Lasagneplader",amount:6,unit:"stk"},{name:"Tomatsauce",amount:400,unit:"ml"},{name:"Ost",amount:100,unit:"g"}],url:"#",leftovers:["Pasta Bolognese"]},
{name:"Pasta Bolognese",ingredients:[{name:"Pasta",amount:250,unit:"g"},{name:"Oksek√∏d",amount:300,unit:"g"},{name:"Tomatsauce",amount:400,unit:"ml"},{name:"L√∏g",amount:1,unit:"stk"}],url:"#"},
{name:"Stegt kylling",ingredients:[{name:"Hel kylling",amount:1,unit:"kg"},{name:"Sm√∏r",amount:50,unit:"g"}],url:"#",leftovers:["Kyllingewraps","Kyllingesalat"]},
{name:"Kyllingewraps",ingredients:[{name:"Wraps",amount:2,unit:"stk"},{name:"Kylling",amount:200,unit:"g"},{name:"Salat",amount:50,unit:"g"}],url:"#"},
{name:"Kyllingesalat",ingredients:[{name:"Kylling",amount:150,unit:"g"},{name:"Salat",amount:50,unit:"g"},{name:"Mayonnaise",amount:20,unit:"ml"}],url:"#"},
{name:"Chili con carne",ingredients:[{name:"Oksek√∏d",amount:400,unit:"g"},{name:"B√∏nner",amount:200,unit:"g"},{name:"Tomater",amount:400,unit:"g"}],url:"#",leftovers:["Chili tacos"]},
{name:"Chili tacos",ingredients:[{name:"Tortillas",amount:2,unit:"stk"},{name:"Chili con carne rester",amount:200,unit:"g"},{name:"Salat",amount:30,unit:"g"}],url:"#"},
{name:"Frikadeller",ingredients:[{name:"Hakket svinek√∏d",amount:500,unit:"g"},{name:"√Üg",amount:2,unit:"stk"},{name:"L√∏g",amount:1,unit:"stk"}],url:"#",leftovers:["Frikadellemad"]},
{name:"Frikadellemad",ingredients:[{name:"Rugbr√∏d",amount:2,unit:"skiver"},{name:"Frikadeller",amount:2,unit:"stk"},{name:"Agurk",amount:30,unit:"g"}],url:"#"},
{name:"Carbonara",ingredients:[{name:"Pasta",amount:250,unit:"g"},{name:"√Üg",amount:2,unit:"stk"},{name:"Bacon",amount:150,unit:"g"}],url:"#"},
{name:"Burger",ingredients:[{name:"Burgerboller",amount:2,unit:"stk"},{name:"Oksek√∏d",amount:200,unit:"g"},{name:"Salat",amount:20,unit:"g"}],url:"#"},
{name:"Pizza",ingredients:[{name:"Pizzadej",amount:1,unit:"stk"},{name:"Tomatsauce",amount:200,unit:"ml"},{name:"Ost",amount:100,unit:"g"}],url:"#"},
{name:"Wokret",ingredients:[{name:"Gr√∏ntsager",amount:200,unit:"g"},{name:"Nudler",amount:100,unit:"g"},{name:"Soyasauce",amount:20,unit:"ml"}],url:"#"},
{name:"Risotto",ingredients:[{name:"Ris",amount:200,unit:"g"},{name:"Bouillon",amount:500,unit:"ml"}],url:"#"},
{name:"Omelet",ingredients:[{name:"√Üg",amount:3,unit:"stk"},{name:"M√¶lk",amount:50,unit:"ml"}],url:"#"},
{name:"Falafel",ingredients:[{name:"Kik√¶rter",amount:250,unit:"g"},{name:"Wraps",amount:2,unit:"stk"}],url:"#"},
{name:"Suppe",ingredients:[{name:"Gr√∏ntsager",amount:400,unit:"g"},{name:"Bouillon",amount:500,unit:"ml"}],url:"#"},
{name:"Tarteletter",ingredients:[{name:"H√∏ns i asparges",amount:1,unit:"d√•se"},{name:"Tarteletskaller",amount:4,unit:"stk"}],url:"#"},
{name:"Kik√¶rtegryde",ingredients:[{name:"Kik√¶rter",amount:200,unit:"g"},{name:"Tomatsauce",amount:300,unit:"ml"},{name:"Gr√∏ntsager",amount:150,unit:"g"}],url:"#",leftovers:["Kik√¶rtesalat"]},
{name:"Kik√¶rtesalat",ingredients:[{name:"Kik√¶rter",amount:150,unit:"g"},{name:"Salat",amount:50,unit:"g"},{name:"Dressing",amount:20,unit:"ml"}],url:"#"}
];

// ===== APP =====
function App(){
  const [people,setPeople]=React.useState(2);
  const [selected,setSelected]=React.useState(null);
  const [leftovers,setLeftovers]=React.useState([]);
  const [showWheel,setShowWheel]=React.useState(false);
  const [currentPool,setCurrentPool]=React.useState(recipes);
  const canvasRef=React.useRef(null);
  const [spinning,setSpinning]=React.useState(false);

  const colors=["#FFB997","#F67280","#C06C84","#6C5B7B","#355C7D","#F8B195","#FDCB82","#FFD6BA","#FEC89A","#F6A6B2",
                "#FFABAB","#F67280","#C06C84","#6C5B7B","#355C7D","#F8B195","#FDCB82","#FFD6BA","#FEC89A","#F6A6B2"];

  React.useEffect(()=>{ drawWheel(); },[showWheel,currentPool]);

  const drawWheel=()=>{
    const canvas=canvasRef.current;
    if(!canvas) return;
    const ctx=canvas.getContext("2d");
    const num=currentPool.length;
    const angle=2*Math.PI/num;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    currentPool.forEach((r,i)=>{
      const gradient=ctx.createRadialGradient(160,160,40,160,160,160);
      gradient.addColorStop(0,'#fff');
      gradient.addColorStop(1,colors[i%colors.length]);
      ctx.beginPath();
      ctx.moveTo(160,160);
      ctx.fillStyle=gradient;
      ctx.arc(160,160,160,i*angle,(i+1)*angle);
      ctx.lineTo(160,160);
      ctx.fill();
      ctx.save();
      ctx.translate(160,160);
      ctx.rotate(i*angle+angle/2);
      ctx.textAlign="right";
      ctx.fillStyle="#3f2d20";
      ctx.font="bold 14px Arial";
      ctx.fillText(r.name,145,5);
      ctx.restore();
    });
  };

  const spin=(pool=currentPool)=>{
    if(spinning) return;
    setSpinning(true);
    const canvas=canvasRef.current;
    const spins=Math.random()*360+1080;
    canvas.style.transition="transform 4s cubic-bezier(.17,.67,.83,.67)";
    canvas.style.transform=`rotate(${spins}deg)`;
    setTimeout(()=>{
      const slice=360/pool.length;
      const index=Math.floor(((360-(spins%360))/slice))%pool.length;
      const selectedRecipe=pool[index];
      setSelected(selectedRecipe);
      if(selectedRecipe.leftovers) setLeftovers(selectedRecipe.leftovers); else setLeftovers([]);
      canvas.style.transition="";
      canvas.style.transform="";
      setSpinning(false);
    },4100);
  };

  const spinLeftovers=()=>{
    if(leftovers.length===0) return;
    const leftoverPool=currentPool.filter(r=>leftovers.includes(r.name));
    if(leftoverPool.length>0) spin(leftoverPool);
  };

  return <div className="flex flex-col items-center justify-center w-full p-4">
    {!showWheel && <div className="text-center mt-12">
      <h1 className="text-4xl font-extrabold mb-4">üçΩÔ∏è Aftensmadshjulet Premium</h1>
      <p className="text-lg mb-6 text-gray-700">V√¶lg antal personer og lad hjulet bestemme aftensmaden!</p>
      <input type="number" min="1" max="12" value={people} onChange={e=>setPeople(parseInt(e.target.value)||2)} className="p-2 border rounded w-20 text-center"/>
      <button onClick={()=>setShowWheel(true)} className="ml-4 px-6 py-3 bg-orange-600 text-white rounded-full font-bold shadow-lg hover:bg-orange-500 transition">Forts√¶t</button>
    </div>}

    {showWheel && <div className="mt-6 flex flex-col items-center">
      <div className="relative w-80 h-80">
        <div className="arrow">‚¨áÔ∏è</div>
        <canvas ref={canvasRef} width="320" height="320"></canvas>
      </div>
      <div className="flex flex-col mt-4 items-center">
        <button onClick={()=>spin()} className="px-6 py-3 bg-red-600 text-white rounded-full font-bold shadow-lg hover:bg-red-500 transition mb-2">Spin</button>
        {leftovers.length>0 && <button onClick={spinLeftovers} className="px-6 py-3 bg-green-600 text-white rounded-full font-bold shadow-lg hover:bg-green-500 transition">Spin med rester</button>}
      </div>
    </div>}

    {selected && <div className="card max-w-md bg-white rounded-2xl shadow-2xl p-6 mt-6 text-left">
      <h3 className="text-2xl font-bold mb-2">{selected.name}</h3>
      <a href={selected.url} target="_blank" className="text-blue-600 underline mb-2 block">Se opskrift</a>
      <h4 className="font-semibold">üõí Indk√∏b for {people} personer:</h4>
      <ul className="list-disc pl-5 mb-2">
        {selected.ingredients.map(i=><li key={i.name}>{i.name}: {i.amount*people} {i.unit}</li>)}
      </ul>
      {leftovers.length>0 && <div>
        <h4 className="font-semibold mt-2">Dag 2 kan du lave:</h4>
        <ul className="list-disc pl-5">
          {leftovers.map(l=><li key={l}>{l}</li>)}
        </ul>
      </div>}
    </div>}
  </div>
}

ReactDOM.render(<App/>,document.getElementById("root"));
</script>
</body>
</html>
